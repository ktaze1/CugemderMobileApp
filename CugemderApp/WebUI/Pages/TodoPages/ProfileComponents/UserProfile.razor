@page "/profile/{id}"
@inject AspNetUsersDAL userDAL
@inject GroupsDAL groupDAL
@inject PointsDAL pointDAL
@inject UploadsDAL uploadDAL
@inject NavigationManager  uriHelper
@inject MeetingsDAL meetingDAL
<style>

    .emp-profile {
        padding: 3%;
        margin-top: 3%;
        margin-bottom: 3%;
        border: thin;
        border-color: black;
        border-radius: 0.5rem;
        background: rgba(170, 165, 165, 0.20);
        ;
    }

    .profile-img {
        text-align: center;
    }

        .profile-img img {
            width: 70%;
            height: 100%;
        }

        .profile-img .file {
            position: relative;
            overflow: hidden;
            margin-top: -20%;
            width: 70%;
            border: none;
            border-radius: 0;
            font-size: 15px;
            background: #212529b8;
        }

            .profile-img .file input {
                position: absolute;
                opacity: 0;
                right: 0;
                top: 0;
            }

    .profile-head h5 {
        color: #333;
    }

    .profile-head h6 {
        color: #0062cc;
    }

    .profile-edit-btn {
        border: none;
        border-radius: 1.5rem;
        width: 70%;
        padding: 2%;
        font-weight: 600;
        color: #6c757d;
        cursor: pointer;
    }

    .proile-rating {
        font-size: 12px;
        color: #818182;
        margin-top: 5%;
    }

        .proile-rating span {
            color: #495057;
            font-size: 15px;
            font-weight: 600;
        }

    .profile-head .nav-tabs {
        margin-bottom: 5%;
    }

        .profile-head .nav-tabs .nav-link {
            font-weight: 600;
            border: none;
        }

            .profile-head .nav-tabs .nav-link.active {
                border: none;
                border-bottom: 2px solid #0062cc;
            }

    .profile-work {
        padding: 14%;
        padding-top: 5%;
        margin-top: -15%;
    }

        .profile-work p {
            font-size: 12px;
            color: #818182;
            font-weight: 600;
            margin-top: 10%;
        }

        .profile-work a {
            text-decoration: none;
            color: #495057;
            font-weight: 600;
            font-size: 14px;
        }

        .profile-work ul {
            list-style: none;
        }

    .profile-tab label {
        font-weight: 600;
    }

    .profile-tab p {
        font-weight: 600;
        color: #0062cc;
    }
</style>

@if (loggedUser == null)
{
    <p> Loading</p> }
else
{
    <div class="container emp-profile">
        <div class="row">
            <div class="col-md-4">
                <div class="profile-img">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS52y5aInsxSm31CvHOFHWujqUx_wWTS9iM6s7BAm21oEN_RiGoog" alt="" />
                </div>
            </div>
            <div class="col-md-6">
                <div class="profile-head">
                    <h5>
                        @loggedUser.FirstName @loggedUser.LastName
                    </h5>
                    <h6>
                        @{ if (loggedUser.JobTitleNavigation != null)
                            { <p>@loggedUser.JobTitleNavigation.TitleName</p>}
                        else
                        { <p> </p>} }
                    </h6>
                    <h6>
                        @{ if (loggedUser.Company != null)
                            { <p>@loggedUser.Company</p>}
                        else
                        { <p> </p>} }
                    </h6>
                    <p class="proile-rating">
                        CUGEMDER PUANI :
                        <span>
                            @{ if (loggedUser.PointsNavigation != null)
                                {
                            <p>@loggedUser.PointsNavigation.TotalPoints</p> }
                        else
                        {
                            <p> </p>
                        }
                            }
                            </span>
                            </p>
                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                <li class="nav-item">
                                    <p class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Bilgiler</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-2">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                    </div>
                    <div class="col-md-8">
                        <div class="tab-content profile-tab" id="myTabContent">
                            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                <div class="row">
                                    <div class="col-md-6">
                                        <label>Ad Soyad</label>
                                    </div>
                                    <div class="col-md-6">
                                        <p>@loggedUser.FirstName @loggedUser.LastName</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label>Cinsiyet</label>
                                    </div>
                                    @if (loggedUser.GenderNavigation != null)
                                    {
                                        <div class="col-md-6">
                                            <p>@loggedUser.GenderNavigation.GenderName</p>
                                        </div>
                                    }
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label>E-mail</label>
                                    </div>
                                    <div class="col-md-6">
                                        <p>@loggedUser.Email</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <label>Telefon</label>
                                    </div>
                                    <div class="col-md-6">
                                        <p>@loggedUser.PhoneNumber</p>
                                    </div>
                                </div>

                                @if (loggedUser.PositionNavigation != null)
                                {
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label>Pozisyon</label>
                                        </div>
                                        <div class="col-md-6">
                                            <p>@loggedUser.PositionNavigation.Position</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            @if (loggedUser.PositionNavigation.Id != 2)
                                            {
                                                <label>Mezuniyet Yılı</label>
                                            }
                                            else
                                            {
                                                <label>Firma Kuruluş Yılı:</label>
                                            }
                                        </div>
                                        @if (loggedUser.Year != null)
                                        {
                                            <div class="col-md-6">
                                                <p>@loggedUser.Year</p>
                                            </div>
                                        }
                                    </div>

                                }
                                <div class="row">
                                    <div class="col-md-6">
                                        <label>Uzmanlık Alanı</label>
                                    </div>
                                    <div class="col-md-6">
                                        <p>
                                            @if (loggedUser.Speciality != null)
                                            {
                                                @loggedUser.Speciality
                                            }
                                            else
                                            {
                                            <p>  </p>
                                        }
                                            </p>
                                        </div>
                                    </div>
                                    @if (loggedUser.Website != null)
                                    {
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Web Sitesi :</label>
                                            </div>
                                            <div class="col-md-6">
                                                <a href="@loggedUser.Website"> @loggedUser.Website</a><br />
                                            </div>
                                        </div>
                                    }
                                    <div class="row">
                                        <div class="col-md-6">
                                            <label>Hakkında :</label>
                                        </div>
                                        <div class="col-md-6">
                                            <p class="card-text">
                                                @if (loggedUser.Summary != null)
                                                {
                                                    @loggedUser.Summary
                                                }
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }


@code {
    [Parameter] public string id { get; set; }

    private AspNetUsers loggedUser;
    private string _userId;

    protected override async Task OnParametersSetAsync()
    {
        loggedUser = await userDAL.GetUsers(id);
    }

    //[CascadingParameter] public IModalService Modal { get; set; }

    //Meetings meeting;

    //async Task ShowModal()
    //{
    //    var MeetingModal = Modal.Show<MeetingRequestComponent>();
    //    var result = await MeetingModal.Result;

    //    if (!result.Cancelled)
    //    {
    //        meeting = (Meetings)result.Data;
    //        meeting.ReceiverId = id;
    //        meeting.SenderId = _userId;
    //        meetingDAL.PostMeetings(meeting);
    //    }
    //}

}
